{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.230.0"},"children":{"ApiInfraStack":{"id":"ApiInfraStack","path":"ApiInfraStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.230.0"},"children":{"HelloLambda":{"id":"HelloLambda","path":"ApiInfraStack/HelloLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.230.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ApiInfraStack/HelloLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiInfraStack/HelloLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiInfraStack/HelloLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"Code":{"id":"Code","path":"ApiInfraStack/HelloLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.230.0"},"children":{"Stage":{"id":"Stage","path":"ApiInfraStack/HelloLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.230.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiInfraStack/HelloLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.230.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ApiInfraStack/HelloLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}"},"s3Key":"71940827a56b5345f9398074c48554ac36566a8b1bacbb0517e535d48ba756ba.zip"},"handler":"handler.handler","role":{"Fn::GetAtt":["HelloLambdaServiceRoleE071F162","Arn"]},"runtime":"python3.12"}}}}},"HelloApi":{"id":"HelloApi","path":"ApiInfraStack/HelloApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.LambdaRestApi","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiInfraStack/HelloApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"name":"HelloApi"}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"ApiInfraStack/HelloApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"ApiInfraStack/HelloApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"ApiInfraStack/HelloApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}]}}}}},"Account":{"id":"Account","path":"ApiInfraStack/HelloApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["HelloApiCloudWatchRoleDEA499C9","Arn"]}}}},"Deployment":{"id":"Deployment","path":"ApiInfraStack/HelloApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiInfraStack/HelloApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Automatically created by the RestApi construct","restApiId":{"Ref":"HelloApi3F989F66"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"ApiInfraStack/HelloApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiInfraStack/HelloApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"HelloApiDeployment9558280891f32e27a336b4aeb652c5257f41615f"},"restApiId":{"Ref":"HelloApi3F989F66"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"ApiInfraStack/HelloApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.230.0"}},"Default":{"id":"Default","path":"ApiInfraStack/HelloApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.230.0","metadata":[]},"children":{"hello":{"id":"hello","path":"ApiInfraStack/HelloApi/Default/hello","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"ApiInfraStack/HelloApi/Default/hello/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["HelloApi3F989F66","RootResourceId"]},"pathPart":"hello","restApiId":{"Ref":"HelloApi3F989F66"}}}},"GET":{"id":"GET","path":"ApiInfraStack/HelloApi/Default/hello/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.230.0","metadata":[]},"children":{"ApiPermission.ApiInfraStackHelloApi7D88C774.GET..hello":{"id":"ApiPermission.ApiInfraStackHelloApi7D88C774.GET..hello","path":"ApiInfraStack/HelloApi/Default/hello/GET/ApiPermission.ApiInfraStackHelloApi7D88C774.GET..hello","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["HelloLambda3D9C82D6","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"HelloApi3F989F66"},"/",{"Ref":"HelloApiDeploymentStageprodE85054A7"},"/GET/hello"]]}}}},"ApiPermission.Test.ApiInfraStackHelloApi7D88C774.GET..hello":{"id":"ApiPermission.Test.ApiInfraStackHelloApi7D88C774.GET..hello","path":"ApiInfraStack/HelloApi/Default/hello/GET/ApiPermission.Test.ApiInfraStackHelloApi7D88C774.GET..hello","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["HelloLambda3D9C82D6","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":",{"Ref":"HelloApi3F989F66"},"/test-invoke-stage/GET/hello"]]}}}},"Resource":{"id":"Resource","path":"ApiInfraStack/HelloApi/Default/hello/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:",{"Ref":"AWS::Region"},":lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["HelloLambda3D9C82D6","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"HelloApihello0292B1E3"},"restApiId":{"Ref":"HelloApi3F989F66"}}}}}}}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"ApiInfraStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"ApiInfraStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.230.0"}},"Condition":{"id":"Condition","path":"ApiInfraStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.230.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApiInfraStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.230.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApiInfraStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.230.0"}}}},"PipelineStack":{"id":"PipelineStack","path":"PipelineStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.230.0"},"children":{"BuildProject":{"id":"BuildProject","path":"PipelineStack/BuildProject","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.PipelineProject","version":"2.230.0","metadata":[]},"children":{"Role":{"id":"Role","path":"PipelineStack/BuildProject/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"PipelineStack/BuildProject/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"PipelineStack/BuildProject/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codebuild.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/BuildProject/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/BuildProject/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"BuildProject097C5DB7"}]]},{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":logs:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":log-group:/aws/codebuild/",{"Ref":"BuildProject097C5DB7"},":*"]]}]},{"Action":["codebuild:CreateReportGroup","codebuild:CreateReport","codebuild:UpdateReport","codebuild:BatchPutTestCases","codebuild:BatchPutCodeCoverages"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":codebuild:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":report-group/",{"Ref":"BuildProject097C5DB7"},"-*"]]}},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineArtifactsBucket22248F97","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucket22248F97","Arn"]},"/*"]]}]},{"Action":["kms:Decrypt","kms:DescribeKey","kms:Encrypt","kms:ReEncrypt*","kms:GenerateDataKey*"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineArtifactsBucketEncryptionKey01D58D69","Arn"]}},{"Action":["kms:Decrypt","kms:Encrypt","kms:ReEncrypt*","kms:GenerateDataKey*"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineArtifactsBucketEncryptionKey01D58D69","Arn"]}}],"Version":"2012-10-17"},"policyName":"BuildProjectRoleDefaultPolicy3E9F248C","roles":[{"Ref":"BuildProjectRoleAA92C755"}]}}}}}}},"Resource":{"id":"Resource","path":"PipelineStack/BuildProject/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codebuild.CfnProject","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodeBuild::Project","aws:cdk:cloudformation:props":{"artifacts":{"type":"CODEPIPELINE"},"cache":{"type":"NO_CACHE"},"encryptionKey":{"Fn::GetAtt":["PipelineArtifactsBucketEncryptionKey01D58D69","Arn"]},"environment":{"type":"LINUX_CONTAINER","image":"aws/codebuild/standard:7.0","imagePullCredentialsType":"CODEBUILD","privilegedMode":false,"computeType":"BUILD_GENERAL1_SMALL"},"serviceRole":{"Fn::GetAtt":["BuildProjectRoleAA92C755","Arn"]},"source":{"type":"CODEPIPELINE","buildSpec":"buildspec.yml"}}}}}},"Pipeline":{"id":"Pipeline","path":"PipelineStack/Pipeline","constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.Pipeline","version":"2.230.0","metadata":[]},"children":{"ArtifactsBucketEncryptionKey":{"id":"ArtifactsBucketEncryptionKey","path":"PipelineStack/Pipeline/ArtifactsBucketEncryptionKey","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.Key","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/ArtifactsBucketEncryptionKey/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.CfnKey","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KMS::Key","aws:cdk:cloudformation:props":{"keyPolicy":{"Statement":[{"Action":"kms:*","Effect":"Allow","Principal":{"AWS":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::",{"Ref":"AWS::AccountId"},":root"]]}},"Resource":"*"}],"Version":"2012-10-17"}}}}}},"ArtifactsBucketEncryptionKeyAlias":{"id":"ArtifactsBucketEncryptionKeyAlias","path":"PipelineStack/Pipeline/ArtifactsBucketEncryptionKeyAlias","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.Alias","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/ArtifactsBucketEncryptionKeyAlias/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.CfnAlias","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KMS::Alias","aws:cdk:cloudformation:props":{"aliasName":"alias/codepipeline-pipelinestackpipeline9db740af","targetKeyId":{"Fn::GetAtt":["PipelineArtifactsBucketEncryptionKey01D58D69","Arn"]}}}}}},"ArtifactsBucket":{"id":"ArtifactsBucket","path":"PipelineStack/Pipeline/ArtifactsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/ArtifactsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"aws:kms","kmsMasterKeyId":{"Fn::GetAtt":["PipelineArtifactsBucketEncryptionKey01D58D69","Arn"]}}}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true}}}},"Policy":{"id":"Policy","path":"PipelineStack/Pipeline/ArtifactsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/ArtifactsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"PipelineArtifactsBucket22248F97"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["PipelineArtifactsBucket22248F97","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucket22248F97","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}}}},"Role":{"id":"Role","path":"PipelineStack/Pipeline/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"PipelineStack/Pipeline/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"codepipeline.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/Pipeline/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineArtifactsBucket22248F97","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucket22248F97","Arn"]},"/*"]]}]},{"Action":["kms:Decrypt","kms:DescribeKey","kms:Encrypt","kms:ReEncrypt*","kms:GenerateDataKey*"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineArtifactsBucketEncryptionKey01D58D69","Arn"]}},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineSourceGitHubSourceCodePipelineActionRole3B2287CE","Arn"]}},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineBuildCDKBuildCodePipelineActionRole15F4B424","Arn"]}},{"Action":"sts:AssumeRole","Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineDeployDeployCDKCodePipelineActionRole02382FF8","Arn"]}}],"Version":"2012-10-17"},"policyName":"PipelineRoleDefaultPolicyC7A05455","roles":[{"Ref":"PipelineRoleD68726F7"}]}}}}}}},"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_codepipeline.CfnPipeline","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CodePipeline::Pipeline","aws:cdk:cloudformation:props":{"artifactStore":{"type":"S3","location":{"Ref":"PipelineArtifactsBucket22248F97"},"encryptionKey":{"type":"KMS","id":{"Fn::GetAtt":["PipelineArtifactsBucketEncryptionKey01D58D69","Arn"]}}},"name":"CDK-AutoDeploy-Pipeline","roleArn":{"Fn::GetAtt":["PipelineRoleD68726F7","Arn"]},"stages":[{"name":"Source","actions":[{"name":"GitHub_Source","outputArtifacts":[{"name":"Artifact_Source_GitHub_Source"}],"actionTypeId":{"category":"Source","version":"1","owner":"AWS","provider":"CodeStarSourceConnection"},"configuration":{"ConnectionArn":"arn:aws:codeconnections:us-east-2:141262319565:connection/54c58779-1895-4f91-aacf-89090eb8d3f6","FullRepositoryId":"dearjay22/Automated-Infrastructure-Deployment-with-AWS-CDK-CodePipeline","BranchName":"main"},"runOrder":1,"roleArn":{"Fn::GetAtt":["PipelineSourceGitHubSourceCodePipelineActionRole3B2287CE","Arn"]}}]},{"name":"Build","actions":[{"name":"CDK_Build","inputArtifacts":[{"name":"Artifact_Source_GitHub_Source"}],"outputArtifacts":[{"name":"Artifact_Build_CDK_Build"}],"actionTypeId":{"category":"Build","version":"1","owner":"AWS","provider":"CodeBuild"},"configuration":{"ProjectName":{"Ref":"BuildProject097C5DB7"}},"runOrder":1,"roleArn":{"Fn::GetAtt":["PipelineBuildCDKBuildCodePipelineActionRole15F4B424","Arn"]}}]},{"name":"Deploy","actions":[{"name":"Deploy_CDK","inputArtifacts":[{"name":"Artifact_Build_CDK_Build"}],"actionTypeId":{"category":"Deploy","version":"1","owner":"AWS","provider":"CloudFormation"},"configuration":{"StackName":"ApiInfraStack","Capabilities":"CAPABILITY_NAMED_IAM","RoleArn":{"Fn::GetAtt":["PipelineDeployDeployCDKRoleCBB0B7D2","Arn"]},"ActionMode":"CREATE_UPDATE","TemplatePath":"Artifact_Build_CDK_Build::ApiInfraStack.template.json"},"runOrder":1,"roleArn":{"Fn::GetAtt":["PipelineDeployDeployCDKCodePipelineActionRole02382FF8","Arn"]}}]}]}}},"Source":{"id":"Source","path":"PipelineStack/Pipeline/Source","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"GitHub_Source":{"id":"GitHub_Source","path":"PipelineStack/Pipeline/Source/GitHub_Source","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"CodePipelineActionRole":{"id":"CodePipelineActionRole","path":"PipelineStack/Pipeline/Source/GitHub_Source/CodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportCodePipelineActionRole":{"id":"ImportCodePipelineActionRole","path":"PipelineStack/Pipeline/Source/GitHub_Source/CodePipelineActionRole/ImportCodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Source/GitHub_Source/CodePipelineActionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["PipelineRoleD68726F7","Arn"]}}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/Pipeline/Source/GitHub_Source/CodePipelineActionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Source/GitHub_Source/CodePipelineActionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"codestar-connections:UseConnection","Effect":"Allow","Resource":"arn:aws:codeconnections:us-east-2:141262319565:connection/54c58779-1895-4f91-aacf-89090eb8d3f6"},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*","s3:DeleteObject*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging","s3:Abort*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineArtifactsBucket22248F97","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucket22248F97","Arn"]},"/*"]]}]},{"Action":["kms:Decrypt","kms:DescribeKey","kms:Encrypt","kms:ReEncrypt*","kms:GenerateDataKey*"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineArtifactsBucketEncryptionKey01D58D69","Arn"]}},{"Action":["s3:PutObjectAcl","s3:PutObjectVersionAcl"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucket22248F97","Arn"]},"/*"]]}}],"Version":"2012-10-17"},"policyName":"PipelineSourceGitHubSourceCodePipelineActionRoleDefaultPolicyE64B1C38","roles":[{"Ref":"PipelineSourceGitHubSourceCodePipelineActionRole3B2287CE"}]}}}}}}}}}}},"Build":{"id":"Build","path":"PipelineStack/Pipeline/Build","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"CDK_Build":{"id":"CDK_Build","path":"PipelineStack/Pipeline/Build/CDK_Build","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"CodePipelineActionRole":{"id":"CodePipelineActionRole","path":"PipelineStack/Pipeline/Build/CDK_Build/CodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportCodePipelineActionRole":{"id":"ImportCodePipelineActionRole","path":"PipelineStack/Pipeline/Build/CDK_Build/CodePipelineActionRole/ImportCodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Build/CDK_Build/CodePipelineActionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["PipelineRoleD68726F7","Arn"]}}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/Pipeline/Build/CDK_Build/CodePipelineActionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Build/CDK_Build/CodePipelineActionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["codebuild:BatchGetBuilds","codebuild:StartBuild","codebuild:StopBuild"],"Effect":"Allow","Resource":{"Fn::GetAtt":["BuildProject097C5DB7","Arn"]}}],"Version":"2012-10-17"},"policyName":"PipelineBuildCDKBuildCodePipelineActionRoleDefaultPolicyE350F3F9","roles":[{"Ref":"PipelineBuildCDKBuildCodePipelineActionRole15F4B424"}]}}}}}}}}}}},"Deploy":{"id":"Deploy","path":"PipelineStack/Pipeline/Deploy","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Deploy_CDK":{"id":"Deploy_CDK","path":"PipelineStack/Pipeline/Deploy/Deploy_CDK","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"CodePipelineActionRole":{"id":"CodePipelineActionRole","path":"PipelineStack/Pipeline/Deploy/Deploy_CDK/CodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportCodePipelineActionRole":{"id":"ImportCodePipelineActionRole","path":"PipelineStack/Pipeline/Deploy/Deploy_CDK/CodePipelineActionRole/ImportCodePipelineActionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Deploy/Deploy_CDK/CodePipelineActionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["PipelineRoleD68726F7","Arn"]}}}],"Version":"2012-10-17"}}}},"8389e75f-0810-4838-bf64-d6f85a95cf83":{"id":"8389e75f-0810-4838-bf64-d6f85a95cf83","path":"PipelineStack/Pipeline/Deploy/Deploy_CDK/CodePipelineActionRole/8389e75f-0810-4838-bf64-d6f85a95cf83","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/Pipeline/Deploy/Deploy_CDK/CodePipelineActionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Deploy/Deploy_CDK/CodePipelineActionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"iam:PassRole","Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineDeployDeployCDKRoleCBB0B7D2","Arn"]}},{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineArtifactsBucket22248F97","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucket22248F97","Arn"]},"/*"]]}]},{"Action":["kms:Decrypt","kms:DescribeKey"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineArtifactsBucketEncryptionKey01D58D69","Arn"]}},{"Action":["cloudformation:CreateStack","cloudformation:DescribeStack*","cloudformation:GetStackPolicy","cloudformation:GetTemplate*","cloudformation:SetStackPolicy","cloudformation:UpdateStack","cloudformation:ValidateTemplate"],"Effect":"Allow","Resource":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":cloudformation:",{"Ref":"AWS::Region"},":",{"Ref":"AWS::AccountId"},":stack/ApiInfraStack/*"]]}}],"Version":"2012-10-17"},"policyName":"PipelineDeployDeployCDKCodePipelineActionRoleDefaultPolicy493039E3","roles":[{"Ref":"PipelineDeployDeployCDKCodePipelineActionRole02382FF8"}]}}}}}}},"Role":{"id":"Role","path":"PipelineStack/Pipeline/Deploy/Deploy_CDK/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.230.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"PipelineStack/Pipeline/Deploy/Deploy_CDK/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.230.0","metadata":[]}},"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Deploy/Deploy_CDK/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"cloudformation.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"PipelineStack/Pipeline/Deploy/Deploy_CDK/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.230.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"PipelineStack/Pipeline/Deploy/Deploy_CDK/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.230.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetObject*","s3:GetBucket*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["PipelineArtifactsBucket22248F97","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["PipelineArtifactsBucket22248F97","Arn"]},"/*"]]}]},{"Action":["kms:Decrypt","kms:DescribeKey"],"Effect":"Allow","Resource":{"Fn::GetAtt":["PipelineArtifactsBucketEncryptionKey01D58D69","Arn"]}},{"Action":"*","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"PipelineDeployDeployCDKRoleDefaultPolicy38E4304D","roles":[{"Ref":"PipelineDeployDeployCDKRoleCBB0B7D2"}]}}}}}}}}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"PipelineStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"PipelineStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.230.0"}},"Condition":{"id":"Condition","path":"PipelineStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.230.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"PipelineStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.230.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"PipelineStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.230.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"}}}}}